<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Dear X Who Doesn't Love Me (K-Drama) - DramaKan</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ¬</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <a href="index.html" class="logo">Drama<span>Kan</span></a>
    </header>

    <main class="container">
        <div class="watch-layout" data-total-episodes="10">
            <div class="main-content-col">
                <div class="video-player-container">
                    <iframe 
                        id="video-player-iframe"
                        src="" 
                        title="Video Player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>

                <div class="episode-meta">
                    <h1 class="episode-title" id="current-episode-title">You are watching Episode 1</h1>
                    <div class="episode-actions">
                        <button class="action-btn" id="prev-ep-btn"><i class="fas fa-arrow-left"></i>Prev</button>
                        <button class="action-btn" id="next-ep-btn">Next<i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div class="widget episodes-list-widget">
                    <h2 class="widget-title">Episodes</h2>
                    <div class="episodes-list" id="episodes-list-container">
                        </div>
                </div>
                
                <div class="widget download-widget">
                    <h2 class="widget-title">Downloads</h2>
                    <div class="download-list">
                        <table>
                            <thead>
                                <tr><th>Episode</th><th>Quality</th><th>Video</th><th>Subtitles</th></tr>
                            </thead>
                            <tbody id="download-links-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div class="widget cast-section">
                    <h2 class="widget-title">Cast</h2>
                    <div class="cast-list-wrapper">
                        <div class="cast-list">
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/B10P0_5c.jpg" alt="Han Ji Hyo">
                                <div class="cast-info"><h4 class="actor-name">Han Ji Hyo</h4><p class="character-name">Seo Hee Soo</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/RK6Q2_5c.jpg" alt="Doyoung">
                                <div class="cast-info"><h4 class="actor-name">Kim Do Young</h4><p class="character-name">Jung Shi Ho</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/j40zY_5c.jpg" alt="Kwon Ah Reum">
                                <div class="cast-info"><h4 class="actor-name">Kwon Ah Reum</h4><p class="character-name">Park Se Jin</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/Bj3D3_5c.jpg" alt="Bang Jae Min">
                                <div class="cast-info"><h4 class="actor-name">Bang Jae Min</h4><p class="character-name">Kim Do Bin</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/2YpX2_5c.jpg" alt="Son Hyun Woo">
                                <div class="cast-info"><h4 class="actor-name">Son Hyun Woo</h4><p class="character-name">Kim Gang Wook</p></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="widget comments-widget">
                     <div class="comments-header">
                        <h2 class="widget-title">Comments (<span id="comment-count">1</span>)</h2>
                     </div>
                     <form class="comment-form" id="comment-form">
                        <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png" alt="Guest Avatar">
                        <textarea placeholder="Join the discussion..." required></textarea>
                        <button type="submit" aria-label="Post Comment"><i class="fas fa-paper-plane"></i></button>
                     </form>
                     <div class="comments-list" id="comments-list-container">
                        <div class="comment">
                            <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png" alt="User Avatar">
                            <div class="comment-content">
                                <p class="comment-author">NCTzen_01 <span>- 2 days ago</span></p>
                                <p class="comment-text">Doyoung is acting so naturally here! The chemistry between Shi Ho and Hee Soo is adorable. Can't wait for the next ep.</p>
                                <div class="comment-actions">
                                    <a href="#"><i class="fas fa-thumbs-up"></i> 12</a>
                                    <a href="#"><i class="fas fa-reply"></i> Reply</a>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>

            <div class="sidebar-col">
                <div class="widget drama-info-widget">
                    <div class="info-poster"><img src="https://i.mydramalist.com/worXO_4f.jpg" alt="Dear X Who Doesn't Love Me Poster"></div>
                    <h2 class="info-title">Dear X Who Doesn't Love Me</h2>
                    <p class="info-synopsis truncated" id="synopsis-text">Seo Hee Soo represents a typical college student who dreams of becoming a lyricist but has zero experience in love. One day, she discovers a mysterious lyric notebook that makes love come true for the writer. Her best friend, Jung Shi Ho, is the only one who knows the secret of her lyric notebook. As Hee Soo gets involved with different men due to the notebook's power, Shi Ho worries about her but also confronts his own hidden feelings.</p>
                    <a id="read-more-btn" class="read-more-btn">Read More</a>
                    <div class="info-details">
                        <p><span>Type:</span> K-Drama</p><p><span>Studio:</span> TVING</p><p><span>Aired:</span> Jul 14, 2022</p><p><span>Status:</span> Finished</p><p><span>Score:</span> 7.9/10</p><p><span>Duration:</span> 25m</p><p><span>Genres:</span> Music, Psychological, Romance, Youth</p>
                    </div>
                </div>
                <div class="widget recommendations-widget">
                    <h2 class="widget-title">You Might Also Like</h2>
                    <div class="recommendations-list">
                        <a href="mimicus.html" class="rec-card">
                            <img src="https://i.mydramalist.com/vB6jA_4f.jpg" alt="Mimicus">
                            <div class="rec-card-info"><p class="rec-title">Mimicus</p><p class="rec-meta">K-Drama â€¢ Finished</p></div>
                        </a>
                        <a href="bluebirthday.html" class="rec-card">
                            <img src="https://i.mydramalist.com/jY4QY_4f.jpg" alt="Blue Birthday">
                            <div class="rec-card-info"><p class="rec-title">Blue Birthday</p><p class="rec-meta">K-Drama â€¢ Finished</p></div>
                        </a>
                        <a href="shadowbeauty.html" class="rec-card">
                            <img src="https://i.mydramalist.com/R202z_4f.jpg" alt="Shadow Beauty">
                            <div class="rec-card-info"><p class="rec-title">Shadow Beauty</p><p class="rec-meta">K-Drama â€¢ Finished</p></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 DramaKan. All rights reserved.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
       
        // --- DRAMA PAGE FUNCTIONALITY ---

        // Episode data for "Dear X Who Doesn't Love Me" - 10 episodes
        // Using TMDB ID: 203683 for the player logic
        const episodeData = [
            { number: 1, title: 'The Notebook', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=1', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 2, title: 'One Month Expiration', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=2', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 3, title: 'Jealousy', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=3', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 4, title: 'Confession', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=4', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 5, title: 'Complications', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=5', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 6, title: 'The Truth', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=6', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 7, title: 'Broken Strings', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=7', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 8, title: 'Real Feelings', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=8', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 9, title: 'The Last Page', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=9', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] },
            { number: 10, title: 'Finale', videoUrl: 'https://www.2embed.cc/embedtv/tt37890201&s=1&e=10', subtitleUrl: '#', downloadLinks: [{ quality: '1080p', url: '#' }] }
        ];
        
        let currentEpisode = 1;
        const totalEpisodes = 10;

        const episodeListContainer = document.getElementById('episodes-list-container');
        const currentEpisodeTitle = document.getElementById('current-episode-title');
        const downloadLinksTbody = document.getElementById('download-links-tbody');
        const prevBtn = document.getElementById('prev-ep-btn');
        const nextBtn = document.getElementById('next-ep-btn');
        const videoPlayer = document.getElementById('video-player-iframe');

        function updateUI(episodeNumber) {
            currentEpisode = parseInt(episodeNumber, 10);
            const episode = episodeData.find(ep => ep.number === currentEpisode);
            if (episode && episode.videoUrl) { videoPlayer.src = episode.videoUrl; }
            currentEpisodeTitle.textContent = `You are watching Episode ${currentEpisode}`;
            document.querySelectorAll('.episode-item').forEach(item => { item.classList.toggle('current', parseInt(item.dataset.episode, 10) === currentEpisode); });
            document.querySelector(`.episode-item[data-episode='${currentEpisode}']`)?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            downloadLinksTbody.innerHTML = '';
            if (episode && episode.downloadLinks) {
                episode.downloadLinks.forEach(link => {
                    downloadLinksTbody.innerHTML += `
                        <tr>
                            <td data-label="Episode">Episode ${currentEpisode}</td>
                            <td data-label="Quality">${link.quality}</td>
                            <td data-label="Video"><a href="${link.url}" class="download-btn" target="_blank" rel="noopener noreferrer"><i class="fas fa-download"></i> Download</a></td>
                            <td data-label="Subtitles"><a href="${episode.subtitleUrl}" class="download-btn" target="_blank" rel="noopener noreferrer"><i class="fas fa-closed-captioning"></i> Download</a></td>
                        </tr>`;
                });
            }
            prevBtn.disabled = currentEpisode === 1;
            nextBtn.disabled = currentEpisode === totalEpisodes;
        }

        function generateEpisodeList() {
            for (let i = 1; i <= totalEpisodes; i++) {
                const episode = episodeData.find(ep => ep.number === i) || { number: i, title: `Episode ${i}` };
                episodeListContainer.innerHTML += `<a class="episode-item" data-episode="${episode.number}"><div class="ep-info"><p class="ep-number">Episode ${episode.number}</p><p class="ep-desc">${episode.title}</p></div></a>`;
            }
        }
        
        episodeListContainer.addEventListener('click', (e) => { const item = e.target.closest('.episode-item'); if (item) updateUI(item.dataset.episode); });
        prevBtn.addEventListener('click', () => { if (currentEpisode > 1) updateUI(currentEpisode - 1); });
        nextBtn.addEventListener('click', () => { if (currentEpisode < totalEpisodes) updateUI(currentEpisode + 1); });
        generateEpisodeList();
        updateUI(1);

        const synopsisText = document.getElementById('synopsis-text');
        const readMoreBtn = document.getElementById('read-more-btn');
        if (synopsisText && readMoreBtn) { readMoreBtn.addEventListener('click', (e) => { e.preventDefault(); synopsisText.classList.toggle('truncated'); readMoreBtn.textContent = synopsisText.classList.contains('truncated') ? 'Read More' : 'Read Less'; }); }

        const commentForm = document.getElementById('comment-form');
        const commentTextarea = commentForm.querySelector('textarea');
        const commentsListContainer = document.getElementById('comments-list-container');
        const commentCountSpan = document.getElementById('comment-count');
        
        const customAvatars = [ '', '', '', '', '' ];

        commentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const commentText = commentTextarea.value.trim();
            if (commentText === '') { return; }
            const randomAvatar = customAvatars[Math.floor(Math.random() * customAvatars.length)];
            const sanitizedText = commentText.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            const newCommentHTML = `
                <div class="comment">
                    <img class="user-avatar" src="${randomAvatar}" alt="User Avatar">
                    <div class="comment-content">
                        <p class="comment-author">Guest <span>- just now</span></p>
                        <p class="comment-text">${sanitizedText}</p>
                        <div class="comment-actions">
                            <a href="#"><i class="fas fa-thumbs-up"></i> 0</a>
                            <a href="#"><i class="fas fa-reply"></i> Reply</a>
                        </div>
                    </div>
                </div>`;
            commentsListContainer.insertAdjacentHTML('beforeend', newCommentHTML);
            commentTextarea.value = '';
            commentCountSpan.textContent = parseInt(commentCountSpan.textContent) + 1;
        });
    });
    </script>
</body>
</html>