<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Seal My Lips with a Kiss (J-Drama) - DramaKan</title>
    <link rel="icon" type="image/png" href="favicon.png" sizes="48x48">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
  <div class="container">
    <div class="header-top-row">
      <div class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
      </div>
      <a href="index.html" class="logo">Drama<span>Kan</span></a>
      <div class="header-actions-placeholder"></div> 
    </div>

    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input id="searchInput" type="text" placeholder="Search drama...">
      <div id="searchResults" class="search-results"></div>
    </div>

    <nav class="nav-links" id="navLinks">
      <ul>
        <li><a href="korean.html">K-Drama</a></li>
        <li><a href="japanese.html">J-Drama</a></li>
        <li><a href="chinese.html">C-Drama</a></li>
        <li><a href="filipino.html">P-Drama</a></li>
        <li><a href="https://anikan.netlify.app/">Anikan</a></li>
        <li><a href="https://Cinekan.netlify.app/">Cinekan</a></li>
      </ul>
    </nav>
  </div>
</header>

    <main class="container">
        <div class="watch-layout" data-total-episodes="10">
            <div class="main-content-col">
                <div class="video-player-container">
                    <iframe 
                        id="video-player-iframe"
                        src="" 
                        title="Video Player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>

                <div class="episode-meta">
                    <h1 class="episode-title" id="current-episode-title">Select an Episode</h1>
                    <div class="episode-actions">
                        <button class="action-btn" id="prev-ep-btn"><i class="fas fa-arrow-left"></i>Prev</button>
                        <button class="action-btn" id="next-ep-btn">Next<i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div class="widget episodes-list-widget">
                    <h2 class="widget-title">Full Episode List</h2>
                    <div class="episodes-list" id="episodes-list-container">
                    </div>
                </div>
                
                <div class="widget download-widget">
                    <h2 class="widget-title">Download Links</h2>
                    <div class="download-list">
                        <table>
                            <thead>
                                <tr><th>Episode</th><th>Quality</th><th>Video</th><th>Subtitles</th></tr>
                            </thead>
                            <tbody id="download-links-tbody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="widget cast-section">
                    <h2 class="widget-title">Cast</h2>
                    <div class="cast-list-wrapper">
                        <div class="cast-list">
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/Xdekqg_5s.jpg" alt="Ayaka Konno">
                                <div class="cast-info"><h4 class="actor-name">Ayaka Konno</h4><p class="character-name">Kaede Sato</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/1wOrKQ_5s.jpg" alt="Ryusei Fujii">
                                <div class="cast-info"><h4 class="actor-name">Ryusei Fujii</h4><p class="character-name">Daisuke Shioya</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/1AkOb_5s.jpg" alt="Noeru Kawashima">
                                <div class="cast-info"><h4 class="actor-name">Noeru Kawashima</h4><p class="character-name">Satoru Mizoguchi</p></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="widget comments-widget">
                     <div class="comments-header">
                        <h2 class="widget-title">Comments (<span id="comment-count">1</span>)</h2>
                     </div>
                     <form class="comment-form" id="comment-form">
                        <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png" alt="Guest Avatar">
                        <textarea placeholder="Join the discussion..." required></textarea>
                        <button type="submit" aria-label="Post Comment"><i class="fas fa-paper-plane"></i></button>
                     </form>
                     <div class="comments-list" id="comments-list-container">
                        <div class="comment">
                            <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.pngs" alt="User Avatar">
                            <div class="comment-content">
                                <p class="comment-author">SecretAdmire <span>- just now</span></p>
                                <p class="comment-text">The closet scene in the first episode was so intense! I love the chemistry between Kaede and Shioya.</p>
                                <div class="comment-actions">
                                    <a href="#"><i class="fas fa-thumbs-up"></i> 14</a>
                                    <a href="#"><i class="fas fa-reply"></i> Reply</a>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>

            <div class="sidebar-col">
                <div class="widget drama-info-widget">
                    <div class="info-poster"><img src="https://i.mydramalist.com/nODxzx_4f.jpg" alt="Seal My Lips with a Kiss Poster"></div>
                    <h2 class="info-title">Seal My Lips with a Kiss („Ç≠„Çπ„Åß„Åµ„Åï„ÅÑ„Åß„ÄÅ„Éê„É¨„Å™„ÅÑ„Åß„ÄÇ)</h2>
                    <p class="info-synopsis truncated" id="synopsis-text">Kaede Sato (Ayaka Konno), a new employee in the sales department, finds herself working late under pressure from her boss Satoru Mizoguchi (Noeru Kawashima). After getting accidentally locked out of the office, she is rescued by her senior coworker and secret crush, Daisuke Shioya (Ryusei Fujii). When Shioya's roommate‚Äîwho turns out to be Kaede's superior, Mizoguchi‚Äîreturns home early, Kaede and Shioya are forced to hide in a closet, sparking a tense and intimate love triangle. The drama is adapted from the popular manga by Fudono Fudou.</p>
                    <a id="read-more-btn" class="read-more-btn">Read More</a>
                    <div class="info-details">
                        <p><span>Type:</span> J-Drama</p><p><span>Studio:</span> Yomiuri TV (ytv)</p><p><span>Episodes:</span> 10</p><p><span>Status:</span> Finished</p><p><span>Score:</span> 8.6/10</p><p><span>Genres:</span> Romance, Comedy, Workplace</p>
                    </div>
                </div>

                <div class="widget recommendations-widget">
                    <h2 class="widget-title">You Might Also Like</h2>
                    <div class="recommendations-list">
                        <a href="agirlandthreesweethearts.html" class="rec-card">
                            <img src="https://m.media-amazon.com/images/M/MV5BYzljZDAwZTUtOWY3Yi00NWNlLWI3ODQtZGU4ZDNiZjMzYThhXkEyXkFqcGc@._V1_.jpg" alt="A Girl and Three Sweethearts">
                            <div class="rec-card-info"><p class="rec-title">A Girl and Three Sweethearts</p><p class="rec-meta">J-Drama ‚Ä¢ Romance</p></div>
                        </a>
                        <a href="IdealBoyfriend.html" class="rec-card">
                            <img src="https://m.media-amazon.com/images/M/MV5BOGU3ZWZkMjctNzExMS00M2U3LTlmNWQtMTRhMGY1YjIyNjAzXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" alt="Ideal Boyfriend">
                            <div class="rec-card-info"><p class="rec-title">Ideal Boyfriend</p><p class="rec-meta">J-Drama ‚Ä¢ Trending</p></div>
                        </a>
                        <a href="cherrymagic.html" class="rec-card">
                            <img src="https://m.media-amazon.com/images/M/MV5BNmE3NzhjYmMtMWY3MS00YjAxLWI2N2MtMmM0NDdhNTQ3NWM2XkEyXkFqcGc@._V1_QL75_UY281_CR18,0,190,281_.jpg" alt="Cherry Magic!">
                            <div class="rec-card-info"><p class="rec-title">Cherry Magic!</p><p class="rec-meta">J-Drama ‚Ä¢ Romance</p></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 DramaKan. All rights reserved.</p>
    </footer>

 <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Complete constant episode data for all 10 episodes
        const episodeData = [
            { id: 1, e: 1, title: 'Locked Out & Secret Hideout', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=1' },
            { id: 2, e: 2, title: 'A Night with Shioya', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=2' },
            { id: 3, e: 3, title: 'Unexpected Wake-up', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=4' },
            { id: 4, e: 4, title: 'Official Confession', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=4' },
            { id: 5, e: 5, title: 'Sweet Words & Office Tension', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=5' },
            { id: 6, e: 6, title: 'Truth & Misunderstandings', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=6' },
            { id: 7, e: 7, title: 'Growing Closer', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=7' },
            { id: 8, e: 8, title: 'Mizoguchi\'s Feelings', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=8' },
            { id: 9, e: 9, title: 'Love Triangle Peak', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=9' },
            { id: 10, e: 10, title: 'The Ultimate Choice (Finale)', url: 'https://multiembed.mov/?video_id=tt34951928&s=1&e=10' }
        ];
        
        let currentIndex = 0;
        const totalEpisodes = 10;

        const episodeListContainer = document.getElementById('episodes-list-container');
        const currentEpisodeTitle = document.getElementById('current-episode-title');
        const downloadLinksTbody = document.getElementById('download-links-tbody');
        const prevBtn = document.getElementById('prev-ep-btn');
        const nextBtn = document.getElementById('next-ep-btn');
        const videoPlayer = document.getElementById('video-player-iframe');

        function updateUI(index) {
            currentIndex = index;
            const episode = episodeData[currentIndex];
            if (episode && episode.url) { videoPlayer.src = episode.url; }
            currentEpisodeTitle.textContent = `You are watching EP ${episode.e} - ${episode.title}`;
            
            document.querySelectorAll('.episode-item').forEach((item, idx) => {
                item.classList.toggle('current', idx === currentIndex);
            });
            
            downloadLinksTbody.innerHTML = `
                <tr>
                    <td data-label=\"Episode\">Episode ${episode.e}</td>
                    <td data-label=\"Quality\">1080p</td>
                    <td data-label=\"Video\"><a href=\"#\" class=\"download-btn\"><i class=\"fas fa-download\"></i> Download</a></td>
                    <td data-label=\"Subtitles\"><a href=\"#\" class=\"download-btn\"><i class=\"fas fa-closed-captioning\"></i> Download</a></td>
                </tr>`;

            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === totalEpisodes - 1;
        }

        function generateEpisodeList() {
            episodeData.forEach((ep, index) => {
                episodeListContainer.innerHTML += `<a class=\"episode-item\" data-index=\"${index}\"><div class=\"ep-info\"><p class=\"ep-number\">EP ${ep.e}</p><p class=\"ep-desc\">${ep.title}</p></div></a>`;
            });
        }
        
        episodeListContainer.addEventListener('click', (e) => {
            const item = e.target.closest('.episode-item');
            if (item) updateUI(parseInt(item.dataset.index));
        });

        prevBtn.addEventListener('click', () => { if (currentIndex > 0) updateUI(currentIndex - 1); });
        nextBtn.addEventListener('click', () => { if (currentIndex < totalEpisodes - 1) updateUI(currentIndex + 1); });

        generateEpisodeList();
        updateUI(0);

        const synopsisText = document.getElementById('synopsis-text');
        const readMoreBtn = document.getElementById('read-more-btn');
        if (synopsisText && readMoreBtn) {
            readMoreBtn.addEventListener('click', (e) => {
                e.preventDefault();
                synopsisText.classList.toggle('truncated');
                readMoreBtn.textContent = synopsisText.classList.contains('truncated') ? 'Read More' : 'Read Less';
            });
        }
    });
    document.addEventListener('DOMContentLoaded', function () {

    // --- 1. MOBILE MENU LOGIC ---
    const menuToggle = document.getElementById('mobileMenuToggle');
    const navLinks = document.getElementById('navLinks');
    
    // Create overlay
    const overlay = document.createElement('div');
    overlay.className = 'menu-overlay';
    document.body.appendChild(overlay);

    if (menuToggle && navLinks) {
        menuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            navLinks.classList.toggle('active');
            overlay.classList.toggle('active');
            const icon = menuToggle.querySelector('i');
            if (icon) {
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            }
        });

        // Close when clicking overlay
        overlay.addEventListener('click', () => {
            navLinks.classList.remove('active');
            overlay.classList.remove('active');
            if (menuToggle.querySelector('i')) {
                menuToggle.querySelector('i').className = 'fas fa-bars';
            }
        });
    }

     // --- 2. RANDOMIZATION UTILITY ---
    function shuffleArray(array) {
        let shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    // --- 3. DATA POPULATION & CAROUSELS ---
    let fuse;
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');

    async function initializeDramaSite() {
        try {
            const response = await fetch('dramas.json');
            const data = await response.json();

            fuse = new Fuse(data, {
                keys: ['title'],
                threshold: 0.4
            });

            // TRENDING: Keep as is (Standard Order)
            populateGrid('trending-grid', data.filter(d => d.Trend === "T").slice(0, 15)); 

            // CATEGORIES: Random Selection (Change 2)
            populateGrid('kdrama-grid', shuffleArray(data.filter(d => d.type === "K-Drama")).slice(0, 15));
            populateGrid('cdrama-grid', shuffleArray(data.filter(d => d.type === "C-Drama")).slice(0, 15));
            populateGrid('jdrama-grid', shuffleArray(data.filter(d => d.type === "J-Drama")).slice(0, 15));
            populateGrid('pdrama-grid', shuffleArray(data.filter(d => d.type === "P-Drama")).slice(0, 15));
            populateGrid('tdrama-grid', shuffleArray(data.filter(d => d.type === "T-Drama")).slice(0, 15));

        } catch (err) {
            console.error("Data Load Error:", err);
        }
    }

    function populateGrid(elementId, items) {
        const grid = document.getElementById(elementId);
        if (!grid) return;
        grid.innerHTML = items.map(drama => `
            <a href="${drama.link}" class="drama-card">
                <div class="drama-card-img"><img src="${drama.img}" alt="${drama.title}"></div>
                <div class="drama-card-info">
                    <h3 class="drama-card-title">${drama.title}</h3>
                    <p class="drama-card-meta">${drama.type}</p>
                </div>
            </a>
        `).join('');
    }

    if (searchInput) {
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim();
            if (query.length < 1 || !fuse) {
                searchResults.style.display = 'none';
                return;
            }
            const results = fuse.search(query, { limit: 10 });
            searchResults.innerHTML = results.map(({ item }) => `
                <a href="${item.link}" class="search-result-item">
                    <img src="${item.img}" width="40" height="55">
                    <div>
                        <div style="color:#fff; font-weight:600;">${item.title}</div>
                        <small style="color:#aaa;">${item.type}</small>
                    </div>
                </a>
            `).join('');
            searchResults.style.display = 'block';
        });
    }

    // --- 3. HERO SLIDER ---
    const sliderWrapper = document.querySelector('.slider-wrapper');
    if (sliderWrapper) {
        let slideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        setInterval(() => {
            slideIndex = (slideIndex + 1) % slides.length;
            sliderWrapper.style.transform = `translateX(-${slideIndex * 100}%)`;
        }, 5000);
    }

    initializeDramaSite();
});

document.addEventListener("DOMContentLoaded", function() {
    const modal = document.getElementById("dramaModal");
    const openBtn = document.getElementById("dramaRequestBtn");
    const closeBtn = document.getElementById("closeDramaModal");
    const form = document.getElementById("dramaRequestForm");

    // 1. YOUR DETAILS (Fill these in!)
    const BOT_TOKEN = "8473278366:AAFgUjLJGAjRoh4Ig1DCat0qCs2D7yZHcbA";
    const CHAT_ID = "5780542178";

    // Open/Close Modal
    openBtn.onclick = () => modal.style.display = "flex";
    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = (e) => { if(e.target === modal) modal.style.display = "none"; }

    // Form Submission
    form.onsubmit = async (e) => {
        e.preventDefault();
        const dramaName = document.getElementById("dramaName").value;
        const status = document.getElementById("statusMessage");
        const submitBtn = document.getElementById("submitBtn");

        submitBtn.innerText = "Sending...";
        submitBtn.disabled = true;

        const text = `üé¨ *New Drama Request*\n\nName: ${dramaName}`;
        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=Markdown`;

        try {
            const response = await fetch(url);
            if (response.ok) {
                status.style.display = "block";
                status.style.color = "#4CAF50";
                status.innerText = "Request sent! Check back in 48 hours.";
                form.reset();
            } else {
                throw new Error();
            }
        } catch (err) {
            status.style.display = "block";
            status.style.color = "#ff4d4d";
            status.innerText = "Error sending request. Try joining Telegram.";
        } finally {
            submitBtn.innerText = "Send Request";
            submitBtn.disabled = false;
        }
    };
});
// Add this inside your slider logic in indexscript.js
const slides = document.querySelectorAll('.slide');
slides.forEach(slide => {
    slide.addEventListener('click', () => {
        const link = slide.querySelector('.btn-primary').getAttribute('href');
        window.location.href = link;
    });
});
     
    </script>
</body>
</html>