<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Tale of the Ancient Snake (C-Drama) - DramaKan</title>
    
    <meta name="title" content="Watch Tale of the Ancient Snake (C-Drama) Online - DramaKan">
    <meta name="description" content="Stream all seasons of Tale of the Ancient Snake. Follow Bai Jingyao, a descendant of Nuwa, and Liu Longting, a thousand-year-old snake immortal, on their journey of cultivation and forbidden romance.">
    <meta name="keywords" content="Tale of the Ancient Snake, Legend of Snake, Biography of Liu Longting, cdrama, chinese drama, watch dramas online, fantasy drama, romance, DramaKan">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://dramakan.site/TaleofAncientSnake.html">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dramakan.site/TaleofAncientSnake.html">
    <meta property="og:title" content="Tale of the Ancient Snake - Watch Asian Dramas Online">
    <meta property="og:description" content="Watch high-quality C-Dramas for free. Stream Tale of the Ancient Snake seasons 1 & 2 now!">
    <meta property="og:image" content="https://image.tmdb.org/t/p/original/5ozT0VzH2HmuqE7nkU47gQLt9PO.jpg"> 
    <meta property="og:site_name" content="DramaKan">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://dramakan.site/TaleofAncientSnake.html">
    <meta name="twitter:title" content="Tale of the Ancient Snake - Watch Asian Dramas Online">
    <meta name="twitter:description" content="A descendant of Nuwa and a thousand-year-old snake immortal embark on a torturous love story. Stream now!">
    <meta name="twitter:image" content="https://image.tmdb.org/t/p/original/5ozT0VzH2HmuqE7nkU47gQLt9PO.jpg">

    <link rel="icon" type="image/png" sizes="32x32" href="https://dramakan.site/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://dramakan.site/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://dramakan.site/apple-touch-icon.png">
    <link rel="shortcut icon" href="https://dramakan.site/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <style>
        .season-divider {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            margin: 10px 0;
            border-left: 4px solid #e50914;
            color: #fff;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <a href="index.html" class="logo">Drama<span>Kan</span></a>
    </header>

    <main class="container">
        <div class="watch-layout" data-total-episodes="48">
            <div class="main-content-col">
                <div class="video-player-container">
                    <iframe 
                        id="video-player-iframe"
                        src="" 
                        title="Video Player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>

                <div class="episode-meta">
                    <h1 class="episode-title" id="current-episode-title">You are watching Season 1, Episode 1</h1>
                    <div class="episode-actions">
                        <button class="action-btn" id="prev-ep-btn"><i class="fas fa-arrow-left"></i>Prev</button>
                        <button class="action-btn" id="next-ep-btn">Next<i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div class="widget episodes-list-widget">
                    <h2 class="widget-title">Episodes</h2>
                    <div class="episodes-list" id="episodes-list-container">
                        </div>
                </div>
                
                <div class="widget download-widget">
                    <h2 class="widget-title">Downloads</h2>
                    <div class="download-list">
                        <table>
                            <thead>
                                <tr><th>Episode</th><th>Quality</th><th>Video</th><th>Subtitles</th></tr>
                            </thead>
                            <tbody id="download-links-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div class="widget cast-section">
                    <h2 class="widget-title">Cast</h2>
                    <div class="cast-list-wrapper">
                        <div class="cast-list">
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/XWWgq_5s.jpg" alt="Meng En">
                                <div class="cast-info"><h4 class="actor-name">Meng En</h4><p class="character-name">Liu Longting</p></div>
                            </div>
                            <div class="cast-card">
                                <img src="https://i.mydramalist.com/R11JV_5s.jpg" alt="Gao Siwen">
                                <div class="cast-info"><h4 class="actor-name">Gao Siwen</h4><p class="character-name">Bai Jingyao</p></div>
                            </div>
                           
                        </div>
                    </div>
                </div>

                <div class="widget comments-widget">
                     <div class="comments-header">
                        <h2 class="widget-title">Comments (<span id="comment-count">1</span>)</h2>
                     </div>
                     <form class="comment-form" id="comment-form">
                        <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png" alt="Guest Avatar">
                        <textarea placeholder="Join the discussion..." required></textarea>
                        <button type="submit" aria-label="Post Comment"><i class="fas fa-paper-plane"></i></button>
                     </form>
                     <div class="comments-list" id="comments-list-container">
                        <div class="comment">
                            <img class="user-avatar" src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png" alt="User Avatar">
                            <div class="comment-content">
                                <p class="comment-author">XianxiaFan_99 <span>- 1 week ago</span></p>
                                <p class="comment-text">The transition from Season 1 to Season 2 is incredible! The chemistry between Liu Longting and Bai Jingyao had me in tears. Definitely one of the most underrated fantasy CDramas out there!</p>
                                <div class="comment-actions">
                                    <a href="#"><i class="fas fa-thumbs-up"></i> 34</a>
                                    <a href="#"><i class="fas fa-reply"></i> Reply</a>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>

            <div class="sidebar-col">
                <div class="widget drama-info-widget">
                    <div class="info-poster"><img src="https://image.tmdb.org/t/p/original/5ozT0VzH2HmuqE7nkU47gQLt9PO.jpg" alt="Tale of the Ancient Snake Poster"></div>
                    <h2 class="info-title">Tale of the Ancient Snake</h2>
                    <p class="info-synopsis truncated" id="synopsis-text">500 years ago, the goddess Nuwa was banished to the mortal world to save a small white snake. In her current life, she transforms into the herbalist Bai Jingyao and crosses paths with the thousand-year-old snake demon Liu Longting. Bound by a mutual pact to cultivate together, the two join forces to subdue demons and eliminate evil. What starts as a relationship built on exploitation gradually blossoms into a deeply emotional, torturous, and unforgettable love story spanning two gripping seasons.</p>
                    <a id="read-more-btn" class="read-more-btn">Read More</a>
                    <div class="info-details">
                        <p><span>Type:</span> C-Drama</p><p><span>Network:</span> iQiyi</p><p><span>Aired:</span> 2021</p><p><span>Status:</span> Finished (2 Seasons)</p><p><span>Score:</span> 7.5/10</p><p><span>Duration:</span> 45m</p><p><span>Genres:</span> Fantasy, Romance, Costume</p>
                    </div>
                </div>
                <div class="widget recommendations-widget">
                    <h2 class="widget-title">You Might Also Like</h2>
                    <div class="recommendations-list">
                        <a href="theuntamed.html" class="rec-card">
                            <img src="https://upload.wikimedia.org/wikipedia/en/3/31/Theuntamed.jpg" alt="The Untamed">
                            <div class="rec-card-info"><p class="rec-title">The Untamed</p><p class="rec-meta">C-Drama • Finished</p></div>
                        </a>
                        <a href="LoveontheTurquoiseLand.html" class="rec-card">
                            <img src="https://i.mydramalist.com/VXOJpQ_4f.jpg" alt="Love on the Turquoise Land">
                            <div class="rec-card-info"><p class="rec-title">Love on the Turquoise Land</p><p class="rec-meta">C-Drama • 2025</p></div>
                        </a>
                        <a href="LoveDesigner.html" class="rec-card">
                            <img src="https://dramaslot.com/wp-content/uploads/2020/06/Love-Designer.jpeg" alt="Love Designer">
                            <div class="rec-card-info"><p class="rec-title">Love Designer</p><p class="rec-meta">C-Drama • Finished</p></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 DramaKan. All rights reserved.</p>
    </footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Hardcoded each and every episode object for both seasons
        const episodeData = [ 
            // SEASON 1
            { globalEp: 1, season: 1, ep: 1, title: 'Encounter in Changbai', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=1', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] }, 
            { globalEp: 2, season: 1, ep: 2, title: 'The Snake Immortal', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=2', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] }, 
            { globalEp: 3, season: 1, ep: 3, title: 'Descendant of Nuwa', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=3', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 4, season: 1, ep: 4, title: 'A Mutual Pact', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=4', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 5, season: 1, ep: 5, title: 'Cultivation Begins', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=5', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 6, season: 1, ep: 6, title: 'Demon Subjugation', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=6', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] }, 
            { globalEp: 7, season: 1, ep: 7, title: 'Shadow in the Mist', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=7', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 8, season: 1, ep: 8, title: 'Misunderstandings', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=8', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 9, season: 1, ep: 9, title: 'The Herbalist\'s Heart', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=9', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 10, season: 1, ep: 10, title: 'Unseen Danger', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=10', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 11, season: 1, ep: 11, title: 'Rescuing the Innocent', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=11', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 12, season: 1, ep: 12, title: 'A Thousand Years', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=12', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 13, season: 1, ep: 13, title: 'Exploitation', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=13', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 14, season: 1, ep: 14, title: 'True Feelings', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=14', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 15, season: 1, ep: 15, title: 'The Rival', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=15', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 16, season: 1, ep: 16, title: 'Forbidden Bond', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=16', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 17, season: 1, ep: 17, title: 'Heavenly Tribulation', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=17', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 18, season: 1, ep: 18, title: 'Sacrifice', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=18', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 19, season: 1, ep: 19, title: 'Shattered Trust', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=19', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 20, season: 1, ep: 20, title: 'Mortal Realm', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=20', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 21, season: 1, ep: 21, title: 'Reconciliation', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=21', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 22, season: 1, ep: 22, title: 'Gathering Power', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=22', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 23, season: 1, ep: 23, title: 'The Final Battle S1', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=23', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 24, season: 1, ep: 24, title: 'A New Journey', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=1&e=24', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },

            // SEASON 2 (Legend of Snake 2 / 长白太岁)
            { globalEp: 25, season: 2, ep: 1, title: 'The Grand Tai Sui', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=1', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 26, season: 2, ep: 2, title: 'Reunion of Fates', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=2', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 27, season: 2, ep: 3, title: 'Dark Omens', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=3', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 28, season: 2, ep: 4, title: 'Hidden Memories', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=4', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 29, season: 2, ep: 5, title: 'The Demon King\'s Plot', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=5', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 30, season: 2, ep: 6, title: 'Echoes of Nuwa', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=6', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 31, season: 2, ep: 7, title: 'Betrayal from Within', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=7', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 32, season: 2, ep: 8, title: 'Lost in the Abyss', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=8', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 33, season: 2, ep: 9, title: 'A Glimmer of Hope', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=9', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 34, season: 2, ep: 10, title: 'The Snake\'s Wrath', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=10', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 35, season: 2, ep: 11, title: 'A Difficult Choice', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=11', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 36, season: 2, ep: 12, title: 'Healing Wounds', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=12', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 37, season: 2, ep: 13, title: 'Trials of Love', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=13', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 38, season: 2, ep: 14, title: 'Unbreakable Spirit', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=14', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 39, season: 2, ep: 15, title: 'The Enemy Revealed', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=15', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 40, season: 2, ep: 16, title: 'Forces Collide', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=16', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 41, season: 2, ep: 17, title: 'Through the Fire', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=17', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 42, season: 2, ep: 18, title: 'Tears of the Goddess', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=18', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 43, season: 2, ep: 19, title: 'Against the Heavens', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=19', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 44, season: 2, ep: 20, title: 'A Desperate Stand', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=20', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 45, season: 2, ep: 21, title: 'Dawn of Destruction', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=21', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 46, season: 2, ep: 22, title: 'To Protect Her', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=22', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 47, season: 2, ep: 23, title: 'Eternal Promise', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=23', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] },
            { globalEp: 48, season: 2, ep: 24, title: 'Together Forever', videoUrl: 'https://www.2embed.cc/embedtv/206803&s=2&e=24', subtitleUrl: '#', downloadLinks: [ { quality: '1080p', url: '#' }, { quality: '720p', url: '#' } ] }
         ];
        
        let currentGlobalEp = 1;
        const totalEpisodes = 48;

        const episodeListContainer = document.getElementById('episodes-list-container');
        const currentEpisodeTitle = document.getElementById('current-episode-title');
        const downloadLinksTbody = document.getElementById('download-links-tbody');
        const prevBtn = document.getElementById('prev-ep-btn');
        const nextBtn = document.getElementById('next-ep-btn');
        const videoPlayer = document.getElementById('video-player-iframe');

        function updateUI(globalEpId) {
            currentGlobalEp = parseInt(globalEpId, 10);
            const episode = episodeData.find(ep => ep.globalEp === currentGlobalEp);
            
            if (episode && episode.videoUrl) { videoPlayer.src = episode.videoUrl; }
            
            // Adjust title with Season and Episode tracking
            currentEpisodeTitle.textContent = `You are watching Season ${episode.season}, Episode ${episode.ep}`;
            
            // Toggle highlight
            document.querySelectorAll('.episode-item').forEach(item => { item.classList.toggle('current', parseInt(item.dataset.episode, 10) === currentGlobalEp); });
            document.querySelector(`.episode-item[data-episode='${currentGlobalEp}']`)?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Clear & populate Download Links
            downloadLinksTbody.innerHTML = '';
            if (episode && episode.downloadLinks) {
                episode.downloadLinks.forEach(link => {
                    downloadLinksTbody.innerHTML += `
                        <tr>
                            <td data-label="Episode">S${episode.season} Ep ${episode.ep}</td>
                            <td data-label="Quality">${link.quality}</td>
                            <td data-label="Video"><a href="${link.url}" class="download-btn" target="_blank" rel="noopener noreferrer"><i class="fas fa-download"></i> Download</a></td>
                            <td data-label="Subtitles"><a href="${episode.subtitleUrl}" class="download-btn" target="_blank" rel="noopener noreferrer"><i class="fas fa-closed-captioning"></i> Download</a></td>
                        </tr>`;
                });
            }
            
            // Update Previous & Next Buttons
            prevBtn.disabled = currentGlobalEp === 1;
            nextBtn.disabled = currentGlobalEp === totalEpisodes;
        }

        function generateEpisodeList() {
            let currentRenderedSeason = 0;
            episodeData.forEach(episode => {
                // Generate Season Dividers
                if(episode.season !== currentRenderedSeason) {
                    episodeListContainer.innerHTML += `<div class="season-divider">Season ${episode.season}</div>`;
                    currentRenderedSeason = episode.season;
                }
                // Generate Episode Links
                episodeListContainer.innerHTML += `
                    <a class="episode-item" data-episode="${episode.globalEp}">
                        <div class="ep-info">
                            <p class="ep-number">Episode ${episode.ep}</p>
                            <p class="ep-desc">${episode.title}</p>
                        </div>
                    </a>`;
            });
        }
        
        episodeListContainer.addEventListener('click', (e) => { const item = e.target.closest('.episode-item'); if (item) updateUI(item.dataset.episode); });
        prevBtn.addEventListener('click', () => { if (currentGlobalEp > 1) updateUI(currentGlobalEp - 1); });
        nextBtn.addEventListener('click', () => { if (currentGlobalEp < totalEpisodes) updateUI(currentGlobalEp + 1); });
        
        // Init Load
        generateEpisodeList();
        updateUI(1);

        // Synopsis Toggle
        const synopsisText = document.getElementById('synopsis-text');
        const readMoreBtn = document.getElementById('read-more-btn');
        if (synopsisText && readMoreBtn) { readMoreBtn.addEventListener('click', (e) => { e.preventDefault(); synopsisText.classList.toggle('truncated'); readMoreBtn.textContent = synopsisText.classList.contains('truncated') ? 'Read More' : 'Read Less'; }); }

        // Comment System Handle
        const commentForm = document.getElementById('comment-form');
        const commentTextarea = commentForm.querySelector('textarea');
        const commentsListContainer = document.getElementById('comments-list-container');
        const commentCountSpan = document.getElementById('comment-count');
        const customAvatars = [ 'https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png', 'https://i.pravatar.cc/40?u=userB', 'https://i.pravatar.cc/40?u=userC', 'https://i.pravatar.cc/40?u=userD', 'https://i.pravatar.cc/40?u=userE' ];

        commentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const commentText = commentTextarea.value.trim();
            if (commentText === '') { return; }
            const randomAvatar = customAvatars[Math.floor(Math.random() * customAvatars.length)];
            const sanitizedText = commentText.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            const newCommentHTML = `
                <div class="comment">
                    <img class="user-avatar" src="${randomAvatar}" alt="User Avatar">
                    <div class="comment-content">
                        <p class="comment-author">Guest <span>- just now</span></p>
                        <p class="comment-text">${sanitizedText}</p>
                        <div class="comment-actions">
                            <a href="#"><i class="fas fa-thumbs-up"></i> 0</a>
                            <a href="#"><i class="fas fa-reply"></i> Reply</a>
                        </div>
                    </div>
                </div>`;
            commentsListContainer.insertAdjacentHTML('beforeend', newCommentHTML);
            commentTextarea.value = '';
            commentCountSpan.textContent = parseInt(commentCountSpan.textContent) + 1;
        });
    });
</script>
</body>
</html>